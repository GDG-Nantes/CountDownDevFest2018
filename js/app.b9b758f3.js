(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)o=r[u],a[o]&&d.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);h&&h(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={1:0},s=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var h=c;s.push([11,0]),n()})({"+ZnS":function(t,e,n){"use strict";var i=n("Gs1d"),a=n.n(i);a.a},11:function(t,e,n){t.exports=n("Vtdi")},"4mGW":function(t,e,n){},"6edX":function(t,e,n){t.exports="./img/sun.f1b96aad.png"},"7TVi":function(t,e,n){},"84bA":function(t,e,n){"use strict";var i=n("Zl3a"),a=n.n(i);a.a},"GpR+":function(t,e,n){"use strict";var i=n("7TVi"),a=n.n(i);a.a},Gs1d:function(t,e,n){},H6cj:function(t,e,n){},KEak:function(t,e,n){},VWD1:function(t,e,n){},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm");var i=n("Wcq6"),a=n.n(i),s=(n("5x/H"),{apiKey:"AIzaSyDd5I-ExFhcHVFUPvD9roREcEGajrXelaU",authDomain:"countdowndevfest2018.firebaseapp.com",databaseURL:"https://countdowndevfest2018.firebaseio.com",projectId:"countdowndevfest2018",storageBucket:"countdowndevfest2018.appspot.com",messagingSenderId:"128321748041"}),o=s;a.a.initializeApp(o);a.a;var r=n("Kw5r"),c=n("jE9Z"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},h=[],u={name:"app",components:{}},d=u,f=(n("ZL7j"),n("KHd+")),p=Object(f["a"])(d,l,h,!1,null,null,null),v=p.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"countdown-container"}},[n("Galaxy",{ref:"galaxy"}),t.countDownStart?n("section",{attrs:{id:"animation-galaxy"}},[n("ScoreList",{attrs:{planets:t.scores}}),n("Timer",{on:{"timer-update":function(e){t.timeUpdate(e)},"end-count-down":function(e){t.endCountDown()}}})],1):t._e(),t.countDownStart?t._e():n("div",{attrs:{id:"startCountDown"},on:{click:function(e){t.startCountDown()}}},[t._v("Start CountDown")]),n("div",{staticStyle:{display:"none"},attrs:{id:"opacity"}})],1)},g=[],y=n("k5VM"),w=(n("rGqo"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"score"},[t.planets.length>0?n("Score",{attrs:{planet:t.planets[0]}}):t._e(),t.planets.length>1?n("Score",{attrs:{planet:t.planets[1]}}):t._e(),t.planets.length>2?n("Score",{attrs:{planet:t.planets[2]}}):t._e(),t.planets.length>3?n("Score",{attrs:{planet:t.planets[3]}}):t._e(),t.planets.length>4?n("Score",{attrs:{planet:t.planets[4]}}):t._e()],1)}),x=[],b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"planet"},[n("img",{attrs:{src:t.planet.url}}),n("div",{staticClass:"planet-name"},[t._v(" "+t._s(t.planet.name))]),n("div",{staticClass:"planet-score"},[t._v(t._s(t.planet.score))])])},_=[],S={name:"Score",props:{planet:Object}},M=S,P=(n("GpR+"),Object(f["a"])(M,b,_,!1,null,"784f200a",null)),k=P.exports,E={name:"ScoreList",components:{Score:k},props:{planets:Array}},F=E,C=(n("84bA"),Object(f["a"])(F,w,x,!1,null,"2413bc58",null)),I=C.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"timer",class:{"last-minute":t.lastMinute}},[n("span",[t._v(" "+t._s(t.minutes)+" : "+t._s(t.seconds))])])},j=[],T=n("zboI"),D=n("EE6d"),L=function(){function t(e){Object(T["a"])(this,t),this.targetDate=new Date(Date.now()+3e4+12e4),this.callback=e,this.checkTime()}return Object(D["a"])(t,[{key:"checkTime",value:function(){var t=Date.now();if(t>this.targetDate.getTime())this.callback({type:"endCountDown",value:!0});else{var e=this.targetDate.getTime()-t,n=new Intl.NumberFormat("fr",{minimumIntegerDigits:2,useGrouping:!1}).format(Math.floor(e/6e4)),i=new Intl.NumberFormat("fr",{minimumIntegerDigits:2,useGrouping:!1}).format(Math.floor(e%6e4/1e3)),a=e<6e4;this.callback({type:"time",value:{minutes:n,seconds:i,lastMinute:a,diff:e}}),window.requestAnimationFrame(this.checkTime.bind(this))}}}]),t}(),R={name:"Timer",props:{},data:function(){return{minutes:"00",seconds:"00",lastMinute:!1}},methods:{callBackTimer:function(t){switch(t.type){case"endCountDown":this.$emit("end-count-down");break;case"time":this.minutes=t.value.minutes,this.seconds=t.value.seconds,this.lastMinute=t.value.lastMinute,this.$emit("timer-update",{diff:t.value.diff});break}}},mounted:function(){new L(this.callBackTimer.bind(this))}},U=R,A=(n("qG3c"),Object(f["a"])(U,O,j,!1,null,"b81e94a0",null)),$=A.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"canvas-container"}},[i("canvas",{ref:"my-canvas"}),i("img",{ref:"sun",staticStyle:{display:"none"},attrs:{src:n("6edX")}})])},V=[],G=(n("rE2o"),n("ioFf"),n("bHtr"),function(){function t(e,n){Object(T["a"])(this,t),this.stars=[],this.canvas=e,this.context=n,this._generateRandomStars(e.width,e.height)}return Object(D["a"])(t,[{key:"resetSizes",value:function(t,e){this.canvas=t,this.context=e,this._generateRandomStars(t.width,t.height)}},{key:"_generateRandomStars",value:function(t,e){for(var n=200,i=0;i<n;i++){var a=Math.round(Math.random()*t),s=Math.round(Math.random()*e),o=1+2*Math.random(),r=Math.random(),c={x:a,y:s,length:o,opacity:r,factor:1,increment:.03*Math.random()};this.stars.push(c)}}},{key:"drawStars",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,a=this.stars[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;this.context.save(),this.context.translate(s.x,s.y),this._drawStar(s),this.context.restore()}}catch(t){e=!0,n=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}}},{key:"_drawStar",value:function(t){t.opacity>1?t.factor=-1:t.opacity<=0&&(t.factor=1,t.x=Math.round(Math.random()*this.canvas.width),t.y=Math.round(Math.random()*this.canvas.height)),t.opacity+=t.increment*t.factor,this.context.beginPath();for(var e=5;e--;)this.context.lineTo(0,t.length),this.context.translate(0,t.length),this.context.rotate(2*Math.PI/10),this.context.lineTo(0,-t.length),this.context.translate(0,-t.length),this.context.rotate(-6*Math.PI/10);this.context.lineTo(0,t.length),this.context.closePath(),this.context.fillStyle="rgba(255, 255, 200, "+t.opacity+")",this.context.shadowBlur=5,this.context.shadowColor="#fdfdff",this.context.fill()}}]),t}()),q=2e3,B=350,z=function(){function t(e,n){Object(T["a"])(this,t),this.canvas=e,this.context=n,this.imagesLoad={},this.images={}}return Object(D["a"])(t,[{key:"_loadSprite",value:function(t){var e=this;if(!this.imagesLoad[t.title])return this.imagesLoad[t.title]=!0,new Promise(function(n,i){var a=new Image;a.src=t.url,a.onload=function(){e.images[t.title]=a,n(t)},a.onerror=function(){i(t)}})}},{key:"_imageFromUrl",value:function(t,e,n,i,a,s){if(this.images[t]){this.context.save(),this.context.beginPath(),this.context.fillStyle="rgba(0,0,0,0)",this.context.arc(i,a,e/2,0,2*Math.PI,!0),this.context.fill(),this.context.closePath(),this.context.clip();var o=this.images[t];this.context.globalAlpha=s,this.context.drawImage(o,0,0,o.width,o.height,0-e/2,0-e/2,e,e),this.context.restore()}else this._loadSprite({url:t,title:t})}},{key:"drawPlanet",value:function(t){t.url&&(this.context.save(),this.context.translate(t.x,t.y),this._imageFromUrl(t.url,t.radius,"#898989",0,0,t.iterations<q?.4:1),this.context.restore())}}]),t}(),W=["#6A0000","#900000","#902B2B","#A63232","#A62626","#FD5039","#C12F2A","#FF6540","#f93801"],X=.1,Y=.85,N=function(){function t(e,n){Object(T["a"])(this,t),this.ctx=n,this.decay=.95,this.r=this._randomIntFromInterval(10,40),this.R=50-this.r,this.angle=2*Math.random()*Math.PI,this.center=e,this.pos={},this.pos.x=this.center.x+this.r*Math.cos(this.angle),this.pos.y=this.center.y+this.r*Math.sin(this.angle),this.dest={},this.dest.x=this.center.x+this.R*Math.cos(this.angle),this.dest.y=this.center.y+this.R*Math.sin(this.angle),this.color=W[~~(Math.random()*W.length)],this.vel={x:0,y:0},this.acc={x:0,y:0}}return Object(D["a"])(t,[{key:"update",value:function(){var t=this.dest.x-this.pos.x,e=this.dest.y-this.pos.y;this.acc.x=t*X,this.acc.y=e*X,this.vel.x+=this.acc.x,this.vel.y+=this.acc.y,this.vel.x*=Y,this.vel.y*=Y,this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.r>0&&(this.r*=this.decay)}},{key:"draw",value:function(){this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI),this.ctx.fill()}},{key:"_randomIntFromInterval",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}}]),t}(),Z=function(){function t(e,n,i){Object(T["a"])(this,t),this.ctx=n,this.canvas=e,this.pos=i,this.particles=[];for(var a=0;a<50;a++)this.particles.push(new N(this.pos,this.ctx))}return Object(D["a"])(t,[{key:"update",value:function(){for(var t=0;t<this.particles.length;t++)this.particles[t].update(),this.particles[t].r<.5&&this.particles.splice(t,1)}},{key:"draw",value:function(){for(var t=0;t<this.particles.length;t++)this.particles[t].draw()}}]),t}(),K=function(){function t(e,n){Object(T["a"])(this,t),this.canvas=e,this.context=n,this.explosions=[]}return Object(D["a"])(t,[{key:"explose",value:function(t){this.explosions.push(new Z(this.canvas,this.context,{x:t.x,y:t.y}))}},{key:"renderExplosions",value:function(){this.context.save(),this.context.globalCompositeOperation="lighter";var t=!0,e=!1,n=void 0;try{for(var i,a=this.explosions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.update(),s.draw()}}catch(t){e=!0,n=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}this.context.restore()}}]),t}(),Q={name:"Galaxy",data:function(){return{context:null,imagesLoad:[],images:[],stars:[],explosions:[],sunIncrementFactor:.02,sunOpacity:.9,stopFrames:!1}},methods:{image:function(t,e){this.context.drawImage(t,0,0,t.width,t.height,0-e/2,0-e/2,e,e)},drawBackground:function(){this.context.save(),this.context.beginPath(),this.context.fillStyle="#302c33",this.context.fillRect(0,0,this.canvas.width,this.canvas.height);var t=this.context.createRadialGradient(this.canvas.width/2,this.canvas.height/2,10+5*Math.random(),this.canvas.width/2,this.canvas.height/2,500+5*Math.random());t.addColorStop(0,"#637b7a"),t.addColorStop(1,"#302c33"),this.context.fillStyle=t,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.closePath()},drawSun:function(){this.context.translate(this.canvas.width/2,this.canvas.height/2),this.sunOpacity>1?this.sunIncrementFactor=-this.sunIncrementFactor:this.sunOpacity<.9&&(this.sunIncrementFactor=-this.sunIncrementFactor),this.sunOpacity+=this.sunIncrementFactor,this.context.globalAlpha=this.sunOpacity,this.image(this.$refs["sun"],200+5*Math.random()),this.context.globalAlpha=1},animate:function(){if(this.context){if(this.drawBackground(),this.starHelper.drawStars(),this.drawSun(),this.planets){var t=this.planets.slice(),e=!0,n=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var o=a.value;o.collision||this.planetHelper.drawPlanet(o)}}catch(t){n=!0,i=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw i}}this.explosionHelper.renderExplosions()}this.context.restore(),this.stopFrames||window.requestAnimationFrame(this.animate.bind(this))}},explodedPlanet:function(t){this.explosionHelper.explose(t)},setPlanets:function(t){this.planets=t},stopFramesFunction:function(){this.stopFrames=!0}},mounted:function(){this.canvas=this.$refs["my-canvas"],this.context=this.canvas.getContext("2d"),this.canvas.width=this.canvas.parentElement.clientWidth,this.canvas.height=this.canvas.parentElement.clientHeight,this.starHelper=new G(this.canvas,this.context),this.planetHelper=new z(this.canvas,this.context),this.explosionHelper=new K(this.canvas,this.context),this.animate()}},J=Q,tt=(n("i6Xp"),Object(f["a"])(J,H,V,!1,null,null,null)),et=tt.exports,nt=["The_Spin_Wires_-_Blackout_Romeo.mp3"],it=["Axl__amp__Arth_-_Breathe.mp3"],at=function(){function t(){Object(T["a"])(this,t),this.indexPlayList=0,this.currentIndex=0,this.audioElt=document.createElement("audio"),this.audioElt.style.display="none",this.currentPlaylist=nt,document.body.appendChild(this.audioElt),window.addEventListener("beforeunload",this._unload.bind(this)),this._startPlayer()}return Object(D["a"])(t,[{key:"_startPlayer",value:function(){localStorage["devfestCountdown-LastSong"]?(this.indexPlayList=+localStorage["devfestCountdown-LastSong"],this.indexPlayList>=this.currentPlaylist.length?this._nextSong():(this._playSound("./assets/audio/".concat(this.currentPlaylist[this.indexPlayList])),this.audioElt.currentTime=+localStorage["devfestCountdown-currentTime"])):(this.indexPlayList=-1,this._nextSong())}},{key:"_unload",value:function(){localStorage["devfestCountdown-LastSong"]="".concat(this.currentIndex),localStorage["devfestCountdown-currentTime"]="".concat(this.audioElt.currentTime)}},{key:"_playSound",value:function(t){this.audioElt.pause(),this.audioElt.src=t,this.audioElt.play(),this.audioElt.onended=this._nextSong.bind(this)}},{key:"_nextSong",value:function(){try{this.currentIndex=Math.max(this.indexPlayList,0),this.indexPlayList=(this.indexPlayList+1)%this.currentPlaylist.length,this._playSound("./assets/audio/".concat(this.currentPlaylist[this.indexPlayList]))}catch(t){console.error(t)}}},{key:"manageSoundVolume",value:function(t){t<1e4&&(this.audioElt.volume=Math.min(Math.max(0,t/1e4),.7))}},{key:"manageVolumeFromPercent",value:function(t){t>0&&(this.audioElt.volume=Math.min(t,1))}},{key:"switchToLastsSongPlaylist",value:function(){this.audioElt.volume=1,this.indexPlayList=0,this.currentPlaylist=it,this._nextSong()}}]),t}(),st=function(){function t(e,n){Object(T["a"])(this,t),this.videoElt=document.createElement("video"),e.appendChild(this.videoElt),this.videoName="Motion_Devfest2018_Vfinale_HQ.mp4",this.callBackEnd=n,this.videoElt.muted=!0,this.videoElt.pause(),this.videoElt.src="./assets/video/".concat(this.videoName),this.videoElt.play()}return Object(D["a"])(t,[{key:"resetVideo",value:function(){this.videoElt.pause(),this.videoElt.currentTime=0,this.videoElt.style.display="none"}},{key:"playVideo",value:function(){this.videoElt.style.display="",this.videoElt.muted=!1,this.videoElt.pause(),this.videoElt.src="./assets/video/".concat(this.videoName),this.videoElt.play(),this.videoElt.onended=this.callBackEnd.bind(this)}}]),t}(),ot=6e4,rt=5e3,ct={name:"countdown",components:{Galaxy:et,ScoreList:I,Timer:$},data:function(){return{scores:[],worker:null,audioPlayer:null,countDownFinish:!1,countDownStart:!1,switchToLastsSongs:!1,videoPlayer:null}},methods:{startCountDown:function(){var t=this;this.countDownStart=!0,this.worker=new Worker("./computePositionsWorker.js"),this.audioPlayer=new at;var e=document.getElementById("opacity");this.videoPlayer=new st(e,function(){setTimeout(function(){t.$router.push("/final")},500)}),setTimeout(function(){t.worker.postMessage({type:"init"})},1e3),this.worker.onmessage=function(t){var e=this,n=t.data;switch(n.type){case"planets":n.data.forEach(function(t){t.init&&t.collision&&(e.$refs["galaxy"].explodedPlanet(t),t=Object(y["a"])({},t,{init:!1,collision:!1,iterations:0,angle:0,x:0,y:0}))}),this.$refs["galaxy"].setPlanets(n.data),this.scores=n.data.slice(0,5);break}}.bind(this)},timeUpdate:function(t){if(t.diff<ot&&t.diff>ot-rt){var e=t.diff-(ot-rt);this.audioPlayer.manageVolumeFromPercent(e/rt)}else t.diff<ot&&!this.switchToLastsSongs?(this.audioPlayer.switchToLastsSongPlaylist(),this.switchToLastsSongs=!0):this.audioPlayer&&this.audioPlayer.manageSoundVolume(t.diff)},endCountDown:function(){var t=this;this.worker.postMessage({type:"stopLoop"}),this.worker.terminate(),this.$refs["galaxy"].stopFramesFunction(),this.countDownFinish=!0,this.audioPlayer&&this.audioPlayer.manageSoundVolume(0),this.videoPlayer.resetVideo();var e=document.getElementById("opacity");e.style.display="",setTimeout(function(){e.classList.add("black"),setTimeout(function(){return t.videoPlayer.playVideo()},4e3)},100)}},mounted:function(){this.countDownFinish}},lt=ct,ht=(n("oNl4"),Object(f["a"])(lt,m,g,!1,null,null,null)),ut=ht.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"game"}},[t.landscape?n("div",{attrs:{id:"landscape"}},[t.fullscreenMode?t._e():n("div",{attrs:{id:"askForFullScreen"}},[n("i",{staticClass:"fas fa-expand fa-6x",attrs:{id:"fullscreen"},on:{click:function(e){t.toggleFullScreen()}}}),n("h2",[t._v("Switch to full screen")])]),t.fullscreenMode?n("div",[n("PowerArrow",{ref:"arrow",attrs:{idUser:t.provider.idUser,urlAvatar:t.user.imageUrl},on:{"launch-planet":function(e){t.launchPlanet(e)}}}),t.provider.idUser?n("span",{staticClass:"fa-stack fa-3x",attrs:{id:"iconBomb"},on:{click:t.destroy}},[n("i",{staticClass:"fas fa-circle fa-stack-2x"}),n("i",{staticClass:"fas fa-bomb fa-stack-1x fa-inverse"})]):t._e(),n("i",{staticClass:"fas fa-question-circle fa-3x",attrs:{id:"iconHelp"},on:{click:function(e){t.showHelp=!0}}}),n("i",{staticClass:"fas fa-compress fa-3x",attrs:{id:"iconExitFullScreen"},on:{click:function(e){t.toggleFullScreen()}}}),n("footer",[t.provider.idUser?t._e():n("h2",[t._v("Throw your planet "),n("i",{staticClass:"fas fa-space-shuttle fa-1x"})]),t.provider.idUser?n("h2",[t._v("Destroy your planet "),n("i",{staticClass:"fas fa-bomb fa-1x"})]):t._e()]),t.showHelp?n("div",{attrs:{id:"howToplay"}},[t._m(0),n("br"),t._m(1),n("br"),n("span",[t._v("Sometimes your planet will not be up to date on the main screen. Coming from outside of the galaxy can take some times ;)")]),n("div",{staticClass:"ok-btn",on:{click:function(e){t.showHelp=!1}}},[t._v("OK")])]):t._e()],1):t._e()]):t._e(),t.landscape?t._e():n("div",{attrs:{id:"portrait"}},[n("i",{staticClass:"fas fa-redo fa-5x",attrs:{id:"iconRotate"}}),n("h2",[t._v("Please turn your phone in landscape mode to play")])])])},ft=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v("To play, simply drag your avatar "),n("i",{staticClass:"fas fa-hand-point-up fa-1x"}),t._v(" to the right and release to launch the planet "),n("i",{staticClass:"fas fa-space-shuttle fa-1x"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v("You can destroy your planet with this icon "),n("i",{staticClass:"fas fa-bomb fa-1x"})])}],pt=(n("f3/d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"parent-arrow"}},[n("canvas",{ref:"arrow-canvas",attrs:{id:"arrow"},on:{touchstart:t.onMouseDown,touchend:t.onMouseUp,touchmove:t.onMouseMove}})])}),vt=[],mt={name:"PowerArrow",props:{idUser:String,urlAvatar:String},data:function(){return{context:null,touch:!1,ratio:1,stateMouse:{draw:!1,from:{X:0,Y:0},to:{X:0,Y:0},power:0,angle:0}}},mounted:function(){this.canvas=this.$refs["arrow-canvas"],this.context=this.canvas.getContext("2d"),this.ratio=window.devicePixelRatio||1,this.fromScratch(),window.onresize=this.fromScratch.bind(this)},methods:{fromScratch:function(){var t=this.canvas.getBoundingClientRect();this.leftMargin=t.left,this.canvas.width=t.width,this.canvas.height=t.height,this.starHelper=new G(this.canvas,this.context),this.planetHelper=new z(this.canvas,this.context),this.drawState()},onMouseDown:function(){this.idUser||(this.touch=!0)},onMouseUp:function(){this.idUser||(this.touch=!1,this.stateMouse.draw=!1,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.$emit("launch-planet",this.stateMouse))},onMouseMove:function(t){if(!this.idUser&&this.touch){var e=this.calculateUserLaunch(t),n=e.from,i=e.to,a=e.power,s=e.angle;this.stateMouse.draw=!0,this.stateMouse.from=n,this.stateMouse.to=i,this.stateMouse.power=a,this.stateMouse.angle=s}},colorGradient:function(t){var e={red:33,blue:243,green:150},n={red:244,blue:54,green:67},i=t,a=n.red-e.red,s=n.green-e.green,o=n.blue-e.blue,r={red:parseInt(Math.floor(e.red+a*i),10),green:parseInt(Math.floor(e.green+s*i),10),blue:parseInt(Math.floor(e.blue+o*i),10)};return"rgb("+r.red+","+r.green+","+r.blue+")"},drawState:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var t=this.context.createRadialGradient(0,this.canvas.height,10,0,this.canvas.height,200);t.addColorStop(0,"#637b7a"),t.addColorStop(1,"#302c3300"),this.context.fillStyle=t,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.starHelper.drawStars(),this.planetHelper.drawPlanet({x:96,y:this.canvas.height/2,url:this.urlAvatar,radius:96,iterations:q}),this.stateMouse.draw&&this.drawArrow(this.context,this.canvas,this.stateMouse.from.X,this.stateMouse.from.Y,this.stateMouse.to.X,this.stateMouse.to.Y,30*this.stateMouse.power,this.colorGradient(this.stateMouse.power)),window.requestAnimationFrame(this.drawState.bind(this))},drawArrow:function(t,e,n,i,a,s,o,r){var c=10,l=Math.atan2(s-i,a-n);t.save(),t.strokeStyle=r,t.beginPath(),t.moveTo(n,i),t.lineTo(a,s),t.lineWidth=o,t.stroke(),t.beginPath(),t.moveTo(a,s),t.lineTo(a-c*Math.cos(l-Math.PI/7),s-c*Math.sin(l-Math.PI/7)),t.lineTo(a-c*Math.cos(l+Math.PI/7),s-c*Math.sin(l+Math.PI/7)),t.lineTo(a,s),t.lineTo(a-c*Math.cos(l-Math.PI/7),s-c*Math.sin(l-Math.PI/7)),t.stroke(),t.restore()},calculateUserLaunch:function(t){var e=90,n=this.canvas.height/2,i=t.touches[0].clientX,a=t.touches[0].clientY,s=1-(this.canvas.width-i+this.leftMargin)/this.canvas.width,o=i-this.leftMargin,r=a,c=Math.atan2(r-n,o-e),l=Math.atan(c)*(180/Math.PI),h=l+180;return{from:{X:e,Y:n},to:{X:o,Y:r},power:s,angle:h}}}},gt=mt,yt=(n("h/jF"),Object(f["a"])(gt,pt,vt,!1,null,null,null)),wt=yt.exports,xt=a.a.firestore(),bt={timestampsInSnapshots:!0};xt.settings(bt);var _t={name:"app",components:{PowerArrow:wt},data:function(){return{provider:{idUser:null},fullscreenMode:!1,showHelp:!1,user:{imageUrl:"",id:0,name:""},landscape:!1,planet:{}}},mounted:function(){var t=this;this.showHelp=!localStorage["firstLook"],localStorage["firstLook"]=!0,this.landscape=window.innerHeight<window.innerWidth,window.addEventListener("orientationchange",function(){t.landscape=90===window.orientation||-90===window.orientation,t.fullscreenMode=!1},!1);var e=a.a.auth().currentUser;e&&(this.user.imageUrl=e.photoURL,this.user.id=e.uid,this.user.name=e.displayName,xt.collection("planets").where("init","==",!0).where("id","==",this.user.id).onSnapshot(function(e){e.docs.length>0&&(t.provider.idUser=e.docs[0].data().id)}),xt.collection("planets").where("init","==",!1).where("id","==",this.user.id).onSnapshot(function(e){e.docChanges().forEach(function(e){"added"===e.type&&(t.provider.idUser=null),"modified"===e.type&&(t.provider.idUser=null),"removed"===e.type&&(t.provider.idUser=e.doc.data().id)})}))},methods:{toggleFullScreen:function(){var t=document.getElementById("landscape");this.fullscreenMode?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),this.fullscreenMode=!this.fullscreenMode},launchPlanet:function(t){this.provider.idUser=this.user.id,this.planet.id?this.updatePlanet(t):this.addPlanet(t)},addPlanet:function(t){var e=Date.now();this.planet={id:this.user.id,name:this.user.name,url:this.user.imageUrl,radius:30+(e%2===0?-1*Math.random()*10:10*Math.random()),distance:10+t.power*B,collision:!1,iterations:0,speed:this.calculateSpeed(t),score:0,angle:t.angle,x:0,y:0,init:!0},xt.collection("planets").doc("".concat(this.user.id)).set(this.planet).then(function(){}).catch(function(t){console.error("Error adding document: ",t)})},updatePlanet:function(t){var e=Date.now(),n={radius:30+(e%2===0?-1*Math.random()*10:10*Math.random()),distance:10+t.power*B,collision:!1,iterations:0,speed:this.calculateSpeed(t),angle:t.angle,x:0,y:0,init:!0};xt.collection("planets").doc("".concat(this.user.id)).update(n).then(function(){}).catch(function(t){console.error("Error adding document: ",t)})},destroy:function(){xt.collection("planets").doc("".concat(this.user.id)).update({collision:!1,iterations:0,init:!1}),this.provider.idUser=null},calculateSpeed:function(t){return 300-150*t.power+50*Math.random()}}},St=_t,Mt=(n("wQfx"),Object(f["a"])(St,dt,ft,!1,null,null,null)),Pt=(Mt.exports,function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),kt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"centre"},[n("img",{attrs:{src:"/assets/img/image-16-9-sponsors.jpg"}})])}],Et={},Ft=Et,Ct=(n("nP12"),Object(f["a"])(Ft,Pt,kt,!1,null,"359f36b7",null)),It=Ct.exports,Ot=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},jt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"auth"}},[n("h1",[t._v("Please authenticate to use the application")]),n("div",{attrs:{id:"firebaseui-auth-container"}}),n("span",[t._v("it's just to play with your avatar ðŸ˜‰ - We won't sell your data! ðŸš€")])])}],Tt=n("iqUP"),Dt=n.n(Tt),Lt=n("WC58"),Rt=n.n(Lt),Ut={name:"auth",mounted:function(){var t={signInSuccessUrl:"/",signInOptions:[Dt.a.auth.GoogleAuthProvider.PROVIDER_ID,Dt.a.auth.TwitterAuthProvider.PROVIDER_ID,Dt.a.auth.FacebookAuthProvider.PROVIDER_ID,Dt.a.auth.GithubAuthProvider.PROVIDER_ID]},e=new Rt.a.auth.AuthUI(Dt.a.auth());e.start("#firebaseui-auth-container",t)}},At=Ut,$t=(n("kmgz"),Object(f["a"])(At,Ot,jt,!1,null,"54b495eb",null)),Ht=($t.exports,function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),Vt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader"},[n("div",{staticClass:"loader-circle"},[n("div",[n("div",{staticClass:"loader moon-loader"},[n("div",{staticClass:"loader-circle"},[n("div",{staticClass:"loader-moon-size"})])])])]),n("div",{staticClass:"loader-sun"})])}],Gt={name:"Wait"},qt=Gt,Bt=(n("+ZnS"),Object(f["a"])(qt,Ht,Vt,!1,null,"e2c1a600",null)),zt=Bt.exports;r["a"].config.productionTip=!1,r["a"].use(c["a"]);var Wt=[{path:"/",component:ut},{path:"/final",component:It},{path:"/wait",component:zt},{path:"/auth",component:ut},{path:"/countdown",component:ut}],Xt=new c["a"]({routes:Wt});new r["a"]({router:Xt,render:function(t){return t(v)}}).$mount("#app")},ZL7j:function(t,e,n){"use strict";var i=n("slcd"),a=n.n(i);a.a},Zl3a:function(t,e,n){},cYn8:function(t,e,n){},"h/jF":function(t,e,n){"use strict";var i=n("KEak"),a=n.n(i);a.a},i6Xp:function(t,e,n){"use strict";var i=n("4mGW"),a=n.n(i);a.a},kmgz:function(t,e,n){"use strict";var i=n("cYn8"),a=n.n(i);a.a},nP12:function(t,e,n){"use strict";var i=n("uGVc"),a=n.n(i);a.a},oNl4:function(t,e,n){"use strict";var i=n("ztPQ"),a=n.n(i);a.a},qG3c:function(t,e,n){"use strict";var i=n("H6cj"),a=n.n(i);a.a},slcd:function(t,e,n){},uGVc:function(t,e,n){},wQfx:function(t,e,n){"use strict";var i=n("VWD1"),a=n.n(i);a.a},ztPQ:function(t,e,n){}});
//# sourceMappingURL=app.b9b758f3.js.map